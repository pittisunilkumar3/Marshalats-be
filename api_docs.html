<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Documentation - Learning Management System</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
        }
        .nav {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }
        .nav li {
            background: #e9ecef;
            padding: 10px 15px;
            border-radius: 5px;
            transition: background 0.3s;
        }
        .nav li:hover {
            background: #667eea;
            color: white;
        }
        .nav a {
            text-decoration: none;
            color: inherit;
            font-weight: 500;
        }
        .section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .endpoint {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 5px 5px 0;
        }
        .method {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 3px;
            font-weight: bold;
            font-size: 12px;
            margin-right: 10px;
        }
        .get { background: #28a745; color: white; }
        .post { background: #007bff; color: white; }
        .put { background: #ffc107; color: black; }
        .delete { background: #dc3545; color: white; }
        .public { background: #17a2b8; color: white; }
        .auth { background: #6f42c1; color: white; }
        pre {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-size: 14px;
        }
        .quick-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .quick-link {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s;
        }
        .quick-link:hover {
            transform: translateY(-5px);
        }
        .quick-link h3 {
            color: #667eea;
            margin-bottom: 15px;
        }
        .base-url {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            border-left: 4px solid #2196f3;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üöÄ Learning Management System API</h1>
        <p>Comprehensive API Documentation for Enhanced Course and Location Management</p>
    </div>

    <div class="nav">
        <ul>
            <li><a href="#overview">Overview</a></li>
            <li><a href="#student-api">Student Details</a></li>
            <li><a href="#course-apis">Course APIs</a></li>
            <li><a href="#category-apis">Category APIs</a></li>
            <li><a href="#duration-apis">Duration APIs</a></li>
            <li><a href="#location-apis">Location APIs</a></li>
            <li><a href="#testing">Testing</a></li>
        </ul>
    </div>

    <div class="section" id="overview">
        <h2>üìñ Overview</h2>
        <div class="base-url">
            <strong>Base URLs:</strong><br>
            Development: <code>http://localhost:8003</code><br>
            Production: <code>https://edumanage-44.preview.dev.com</code>
        </div>
        
        <h3>üîê Authentication</h3>
        <p><strong>Authenticated Endpoints:</strong> Require Bearer token in Authorization header</p>
        <pre>Authorization: Bearer &lt;your_jwt_token&gt;</pre>
        
        <p><strong>Public Endpoints:</strong> No authentication required - accessible directly</p>
        
        <h3>üéØ Key Features</h3>
        <ul>
            <li>Hierarchical data structures with nested relationships</li>
            <li>Public APIs for seamless frontend integration</li>
            <li>Comprehensive filtering and pagination</li>
            <li>Consistent JSON response formats</li>
            <li>Real-time pricing calculations</li>
        </ul>
    </div>

    <div class="section" id="student-api">
        <h2>üë• Student Details API</h2>
        
        <div class="endpoint">
            <span class="method auth">AUTH</span>
            <span class="method get">GET</span>
            <strong>/users/students/details</strong>
            <p>Returns detailed student information with course enrollment data.</p>
            
            <h4>Access Control:</h4>
            <ul>
                <li><strong>Super Admin:</strong> All students across all branches</li>
                <li><strong>Coach Admin:</strong> Students in assigned branch only</li>
                <li><strong>Coach:</strong> Students in assigned branch only</li>
            </ul>
            
            <h4>cURL Example:</h4>
            <pre>curl -X GET "http://localhost:8003/users/students/details" \
  -H "Authorization: Bearer &lt;your_token&gt;"</pre>
        </div>
    </div>

    <div class="section" id="course-apis">
        <h2>üìö Enhanced Course APIs</h2>
        
        <div class="endpoint">
            <span class="method public">PUBLIC</span>
            <span class="method get">GET</span>
            <strong>/courses/public/all</strong>
            <p>Get all available courses without authentication.</p>
            
            <h4>Query Parameters:</h4>
            <ul>
                <li><code>active_only</code> (boolean, default: true)</li>
                <li><code>skip</code> (integer, default: 0)</li>
                <li><code>limit</code> (integer, default: 100, max: 100)</li>
            </ul>
            
            <h4>cURL Example:</h4>
            <pre>curl -X GET "http://localhost:8003/courses/public/all?active_only=true&limit=50"</pre>
        </div>
        
        <div class="endpoint">
            <span class="method public">PUBLIC</span>
            <span class="method get">GET</span>
            <strong>/courses/public/by-category/{category_id}</strong>
            <p>Get all courses filtered by category with durations and locations.</p>
            
            <h4>Path Parameters:</h4>
            <ul>
                <li><code>category_id</code> (required) - Category UUID</li>
            </ul>
            
            <h4>Query Parameters:</h4>
            <ul>
                <li><code>difficulty_level</code> (optional) - Beginner, Intermediate, Advanced</li>
                <li><code>include_durations</code> (boolean, default: true)</li>
                <li><code>active_only</code> (boolean, default: true)</li>
            </ul>
            
            <h4>cURL Example:</h4>
            <pre>curl -X GET "http://localhost:8003/courses/public/by-category/category-uuid-123?difficulty_level=Advanced"</pre>
        </div>
        
        <div class="endpoint">
            <span class="method public">PUBLIC</span>
            <span class="method get">GET</span>
            <strong>/courses/public/by-location/{location_id}</strong>
            <p>Get courses available at a specific location with branches and durations.</p>
            
            <h4>Path Parameters:</h4>
            <ul>
                <li><code>location_id</code> (required) - Location UUID</li>
            </ul>
            
            <h4>Query Parameters:</h4>
            <ul>
                <li><code>category_id</code> (optional) - Filter by category</li>
                <li><code>include_durations</code> (boolean, default: true)</li>
                <li><code>include_branches</code> (boolean, default: false)</li>
            </ul>
            
            <h4>cURL Example:</h4>
            <pre>curl -X GET "http://localhost:8003/courses/public/by-location/location-uuid-123?include_durations=true"</pre>
        </div>
    </div>

    <div class="section" id="category-apis">
        <h2>üè∑Ô∏è Enhanced Category APIs</h2>
        
        <div class="endpoint">
            <span class="method public">PUBLIC</span>
            <span class="method get">GET</span>
            <strong>/categories/public/details</strong>
            <p>Get category details with associated courses and subcategories.</p>
            
            <h4>Query Parameters:</h4>
            <ul>
                <li><code>category_id</code> (optional) - Specific category ID</li>
                <li><code>include_courses</code> (boolean, default: true)</li>
                <li><code>active_only</code> (boolean, default: true)</li>
            </ul>
            
            <h4>cURL Example:</h4>
            <pre>curl -X GET "http://localhost:8003/categories/public/details?include_courses=true"</pre>
        </div>
        
        <div class="endpoint">
            <span class="method public">PUBLIC</span>
            <span class="method get">GET</span>
            <strong>/categories/public/with-courses-and-durations</strong>
            <p>Get categories with complete hierarchy - courses and durations nested.</p>
            
            <h4>Query Parameters:</h4>
            <ul>
                <li><code>category_id</code> (optional) - Specific category ID</li>
                <li><code>include_locations</code> (boolean, default: false)</li>
                <li><code>active_only</code> (boolean, default: true)</li>
            </ul>
            
            <h4>cURL Example:</h4>
            <pre>curl -X GET "http://localhost:8003/categories/public/with-courses-and-durations?include_locations=true"</pre>
        </div>
        
        <div class="endpoint">
            <span class="method public">PUBLIC</span>
            <span class="method get">GET</span>
            <strong>/categories/public/location-hierarchy</strong>
            <p>üåü <strong>Complete Hierarchy API</strong> - Get category with all courses, locations, branches, and durations.</p>
            
            <h4>Query Parameters:</h4>
            <ul>
                <li><code>category_id</code> (required) - Category UUID</li>
                <li><code>location_id</code> (optional) - Filter by specific location</li>
                <li><code>include_pricing</code> (boolean, default: true)</li>
            </ul>
            
            <h4>cURL Example:</h4>
            <pre>curl -X GET "http://localhost:8003/categories/public/location-hierarchy?category_id=category-uuid-123"</pre>
        </div>
    </div>

    <div class="section" id="duration-apis">
        <h2>‚è±Ô∏è Enhanced Duration APIs</h2>
        
        <div class="endpoint">
            <span class="method public">PUBLIC</span>
            <span class="method get">GET</span>
            <strong>/durations/public/all</strong>
            <p>Get all available course durations with pricing multipliers.</p>
            
            <h4>cURL Example:</h4>
            <pre>curl -X GET "http://localhost:8003/durations/public/all"</pre>
        </div>
        
        <div class="endpoint">
            <span class="method public">PUBLIC</span>
            <span class="method get">GET</span>
            <strong>/durations/public/by-course/{course_id}</strong>
            <p>Get available durations for a specific course with calculated pricing.</p>
            
            <h4>Path Parameters:</h4>
            <ul>
                <li><code>course_id</code> (required) - Course UUID</li>
            </ul>
            
            <h4>Query Parameters:</h4>
            <ul>
                <li><code>include_pricing</code> (boolean, default: true)</li>
            </ul>
            
            <h4>cURL Example:</h4>
            <pre>curl -X GET "http://localhost:8003/durations/public/by-course/course-uuid-456?include_pricing=true"</pre>
        </div>
        
        <div class="endpoint">
            <span class="method public">PUBLIC</span>
            <span class="method get">GET</span>
            <strong>/durations/public/by-location-course</strong>
            <p>Get durations based on location and course combination with branch availability.</p>
            
            <h4>Query Parameters:</h4>
            <ul>
                <li><code>location_id</code> (required) - Location UUID</li>
                <li><code>course_id</code> (required) - Course UUID</li>
                <li><code>include_branches</code> (boolean, default: false)</li>
            </ul>
            
            <h4>cURL Example:</h4>
            <pre>curl -X GET "http://localhost:8003/durations/public/by-location-course?location_id=loc-123&course_id=course-456"</pre>
        </div>
    </div>

    <div class="section" id="location-apis">
        <h2>üìç Enhanced Location APIs</h2>
        
        <div class="endpoint">
            <span class="method public">PUBLIC</span>
            <span class="method get">GET</span>
            <strong>/locations/public/details</strong>
            <p>Get location details with associated branches and course counts.</p>
            
            <h4>Query Parameters:</h4>
            <ul>
                <li><code>location_id</code> (optional) - Specific location ID</li>
                <li><code>include_branches</code> (boolean, default: true)</li>
                <li><code>include_courses</code> (boolean, default: false)</li>
            </ul>
            
            <h4>cURL Example:</h4>
            <pre>curl -X GET "http://localhost:8003/locations/public/details?include_branches=true&include_courses=true"</pre>
        </div>
        
        <div class="endpoint">
            <span class="method public">PUBLIC</span>
            <span class="method get">GET</span>
            <strong>/branches/public/by-location/{location_id}</strong>
            <p>Get branches filtered by location with available courses and timings.</p>
            
            <h4>Path Parameters:</h4>
            <ul>
                <li><code>location_id</code> (required) - Location UUID</li>
            </ul>
            
            <h4>Query Parameters:</h4>
            <ul>
                <li><code>include_courses</code> (boolean, default: true)</li>
                <li><code>include_timings</code> (boolean, default: true)</li>
            </ul>
            
            <h4>cURL Example:</h4>
            <pre>curl -X GET "http://localhost:8003/branches/public/by-location/location-uuid-123?include_courses=true"</pre>
        </div>
    </div>

    <div class="section" id="testing">
        <h2>üß™ Testing Workflows</h2>
        
        <h3>1. Category Selection Workflow</h3>
        <pre># Step 1: Get all categories with courses and durations
curl -X GET "http://localhost:8003/categories/public/with-courses-and-durations"

# Step 2: Get complete hierarchy for a specific category
curl -X GET "http://localhost:8003/categories/public/location-hierarchy?category_id=category-uuid-123"

# Step 3: Get courses by category
curl -X GET "http://localhost:8003/courses/public/by-category/category-uuid-123"</pre>
        
        <h3>2. Location Selection Workflow</h3>
        <pre># Step 1: Get all locations with branches
curl -X GET "http://localhost:8003/locations/public/details?include_branches=true"

# Step 2: Get branches by location
curl -X GET "http://localhost:8003/branches/public/by-location/location-uuid-123"

# Step 3: Get courses by location
curl -X GET "http://localhost:8003/courses/public/by-location/location-uuid-123"</pre>
        
        <h3>3. Course Selection Workflow</h3>
        <pre># Step 1: Get courses by category
curl -X GET "http://localhost:8003/courses/public/by-category/category-uuid-123"

# Step 2: Get durations for specific course
curl -X GET "http://localhost:8003/durations/public/by-course/course-uuid-456"

# Step 3: Get durations by location and course
curl -X GET "http://localhost:8003/durations/public/by-location-course?location_id=loc-123&course_id=course-456"</pre>
    </div>

    <div class="quick-links">
        <div class="quick-link">
            <h3>üöÄ FastAPI Docs</h3>
            <p>Interactive API documentation</p>
            <a href="http://localhost:8003/docs" target="_blank">Open Swagger UI</a>
        </div>
        
        <div class="quick-link">
            <h3>üìã ReDoc</h3>
            <p>Alternative documentation view</p>
            <a href="http://localhost:8003/redoc" target="_blank">Open ReDoc</a>
        </div>
        
        <div class="quick-link">
            <h3>üìÑ Markdown Docs</h3>
            <p>Detailed markdown documentation</p>
            <a href="./COMPREHENSIVE_API_DOCUMENTATION.md" target="_blank">View Markdown</a>
        </div>
        
        <div class="quick-link">
            <h3>üîß Postman</h3>
            <p>Import collection for testing</p>
            <p>Use the JSON structure provided in the markdown docs</p>
        </div>
    </div>

    <div class="section">
        <h2>üéØ Expected User Workflow</h2>
        <ol>
            <li><strong>Select Category:</strong> Get all related courses, locations, branches, and durations</li>
            <li><strong>Select Location:</strong> Get all branches, available courses, and their durations</li>
            <li><strong>Select Course:</strong> Get available durations and locations where it's offered</li>
            <li><strong>Navigate Seamlessly:</strong> All data interconnected without authentication barriers</li>
        </ol>
        
        <div style="background: #d4edda; padding: 15px; border-radius: 5px; margin-top: 20px; border-left: 4px solid #28a745;">
            <strong>‚úÖ All endpoints are now implemented and ready for testing!</strong><br>
            The API provides comprehensive hierarchical data access with proper filtering, pagination, and error handling.
        </div>
    </div>
</body>
</html>
